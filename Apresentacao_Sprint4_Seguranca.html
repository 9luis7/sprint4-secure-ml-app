<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sprint 4: Aplica√ß√£o Segura de Infer√™ncia de ML</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        @page {
            size: A4;
            margin: 1.5cm;
        }
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.7;
            color: #2c3e50;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .page {
            page-break-after: always;
            min-height: 27cm;
            padding: 2.5cm;
            box-sizing: border-box;
            background: white;
            border-radius: 20px;
            margin: 1cm;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb);
        }
        
        .page:last-child {
            page-break-after: avoid;
        }
        
        .cover {
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            position: relative;
        }
        
        .cover::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(102,126,234,0.1) 0%, transparent 70%);
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        .title {
            font-size: 2.8em;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5em;
            text-shadow: 0 4px 8px rgba(0,0,0,0.1);
            position: relative;
            z-index: 1;
        }
        
        .subtitle {
            font-size: 1.4em;
            color: #5a6c7d;
            margin-bottom: 2.5em;
            font-weight: 400;
            position: relative;
            z-index: 1;
        }
        
        .team-table {
            width: 85%;
            border-collapse: collapse;
            margin: 2.5em auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-radius: 15px;
            overflow: hidden;
            background: white;
            position: relative;
            z-index: 1;
        }
        
        .team-table th,
        .team-table td {
            padding: 18px 20px;
            text-align: left;
            border: none;
        }
        
        .team-table th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: 600;
            font-size: 1.1em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .team-table tr:nth-child(even) {
            background: linear-gradient(135deg, #f8f9ff, #e8f2ff);
        }
        
        .team-table tr:hover {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            transform: translateY(-2px);
            transition: all 0.3s ease;
        }
        
        .section-title {
            font-size: 2.2em;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1.5em;
            position: relative;
            padding-bottom: 0.8em;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 2px;
        }
        
        .vulnerability-box {
            background: linear-gradient(135deg, #fff5f5, #ffeaea);
            border-left: 6px solid #e74c3c;
            padding: 2em;
            margin: 2em 0;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.15);
            position: relative;
            overflow: hidden;
        }
        
        .vulnerability-box::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(231,76,60,0.1) 0%, transparent 70%);
        }
        
        .vulnerability-title {
            font-weight: 700;
            color: #e74c3c;
            font-size: 1.4em;
            margin-bottom: 1em;
            position: relative;
            z-index: 1;
        }
        
        .code-block {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: #ecf0f1;
            padding: 2em;
            border-radius: 15px;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 0.95em;
            overflow-x: auto;
            margin: 2em 0;
            box-shadow: 0 10px 30px rgba(44,62,80,0.3);
            border: 1px solid rgba(52,73,94,0.2);
            position: relative;
        }
        
        .code-block::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 15px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e74c3c;
            box-shadow: 20px 0 0 #f39c12, 40px 0 0 #27ae60;
        }
        
        .code-block code {
            padding-left: 70px;
            display: block;
        }
        
        .mermaid {
            text-align: center;
            margin: 2.5em 0;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 0.5em;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 1px solid rgba(0,0,0,0.05);
            min-height: 600px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
        }
        
        .mermaid img {
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            width: 100% !important;
            height: 100% !important;
            min-height: 550px !important;
            object-fit: fill !important;
            object-position: center !important;
            display: block !important;
            transform: scale(1.5) !important;
            transform-origin: center !important;
        }
        
        .mermaid img:hover {
            transform: scale(1.02);
        }
        
        .architecture-explanation {
            background: linear-gradient(135deg, #e8f5e8, #d4edda);
            border: 2px solid #27ae60;
            padding: 2em;
            border-radius: 20px;
            margin: 2em 0;
            box-shadow: 0 10px 30px rgba(39,174,96,0.15);
            position: relative;
        }
        
        .architecture-explanation::before {
            content: 'üõ°Ô∏è';
            position: absolute;
            top: -15px;
            left: 30px;
            background: white;
            padding: 10px 15px;
            border-radius: 50%;
            font-size: 1.5em;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .architecture-item {
            margin: 1em 0;
            padding-left: 1.5em;
            position: relative;
        }
        
        .architecture-item::before {
            content: '‚ñ∂';
            position: absolute;
            left: 0;
            color: #27ae60;
            font-weight: bold;
        }
        
        .conclusion {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 2px solid #ffc107;
            padding: 2.5em;
            border-radius: 20px;
            margin: 2.5em 0;
            font-style: italic;
            box-shadow: 0 15px 35px rgba(255,193,7,0.2);
            position: relative;
        }
        
        .conclusion::before {
            content: 'üí°';
            position: absolute;
            top: -15px;
            left: 30px;
            background: white;
            padding: 10px 15px;
            border-radius: 50%;
            font-size: 1.5em;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .improvements {
            background: linear-gradient(135deg, #d1ecf1, #bee5eb);
            border: 2px solid #17a2b8;
            padding: 2em;
            border-radius: 20px;
            margin: 2em 0;
            box-shadow: 0 10px 30px rgba(23,162,184,0.15);
            position: relative;
        }
        
        .improvements::before {
            content: 'üöÄ';
            position: absolute;
            top: -15px;
            left: 30px;
            background: white;
            padding: 10px 15px;
            border-radius: 50%;
            font-size: 1.5em;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .improvements h4 {
            color: #17a2b8;
            margin-top: 0;
            font-weight: 600;
        }
        
        .highlight {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            padding: 0.3em 0.6em;
            border-radius: 8px;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(255,193,7,0.3);
        }
        
        h2 {
            font-size: 1.6em;
            font-weight: 600;
            color: #34495e;
            margin-top: 2em;
            margin-bottom: 1em;
            position: relative;
        }
        
        h2::before {
            content: '';
            position: absolute;
            left: -20px;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 2px;
        }
        
        h3 {
            font-size: 1.3em;
            font-weight: 600;
            color: #2c3e50;
            margin-top: 1.5em;
        }
        
        ul, ol {
            padding-left: 2em;
        }
        
        li {
            margin: 0.5em 0;
            position: relative;
        }
        
        li::marker {
            color: #667eea;
        }
        
        p {
            margin: 1em 0;
            text-align: justify;
        }
        
        strong {
            color: #2c3e50;
            font-weight: 600;
        }
        
        code {
            background: rgba(102,126,234,0.1);
            padding: 0.2em 0.4em;
            border-radius: 4px;
            font-family: 'Fira Code', monospace;
            color: #667eea;
            font-weight: 500;
        }
        
        /* Animations */
        .page {
            animation: slideIn 0.6s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .vulnerability-box,
        .architecture-explanation,
        .conclusion,
        .improvements {
            animation: fadeInUp 0.8s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <!-- P√°gina 1: Capa & Equipe -->
    <div class="page">
        <div class="cover">
            <div class="title">Sprint 4: Aplica√ß√£o Segura de Infer√™ncia de ML</div>
            <div class="subtitle">Prote√ß√£o contra SSRF, DoS e Resili√™ncia a Ransomware</div>
            
            <table class="team-table">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>RM</th>
                        <th>Fun√ß√£o</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Luis Fernando de Oliveira Salgado</strong></td>
                        <td>561401</td>
                        <td>Desenvolvimento & Seguran√ßa</td>
                    </tr>
                    <tr>
                        <td><strong>Bernardo Braga Perobeli</strong></td>
                        <td>562468</td>
                        <td>An√°lise de Vulnerabilidades</td>
                    </tr>
                    <tr>
                        <td><strong>Lucca Phelipe Masini</strong></td>
                        <td>564121</td>
                        <td>Documenta√ß√£o & Testes</td>
                    </tr>
                    <tr>
                        <td><strong>Igor Paix√£o Sarak</strong></td>
                        <td>563726</td>
                        <td>Arquitetura & Mitiga√ß√µes</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- P√°gina 2: O Desafio & Prova do Crime -->
    <div class="page">
        <h1 class="section-title">O Desafio & Prova do Crime</h1>
        
        <p>Este projeto nasceu de um <strong>desafio educacional</strong>: criar uma aplica√ß√£o Flask de machine learning que <strong>intencionalmente</strong> possu√≠sse vulnerabilidades de seguran√ßa para fins de estudo. O objetivo era demonstrar diferentes tipos de ataques cibern√©ticos e suas respectivas mitiga√ß√µes, implementando uma arquitetura de <strong>defesa em profundidade</strong>.</p>
        
        <h2>Vulnerabilidades Identificadas</h2>
        
        <div class="vulnerability-box">
            <div class="vulnerability-title">1. üïµÔ∏è SSRF (Server-Side Request Forgery)</div>
            <p><strong>Endpoint afetado:</strong> <code>/predict</code><br>
            <strong>Par√¢metro vulner√°vel:</strong> <code>image_url</code><br>
            <strong>Vulnerabilidade:</strong> Aplica√ß√£o fazia requisi√ß√µes HTTP para qualquer URL fornecida<br>
            <strong>Risco:</strong> Acesso a recursos internos do servidor<br>
            <strong>Payload de ataque:</strong> <code>http://localhost:5000/predict?image_url=http://127.0.0.1:8080/admin</code></p>
        </div>
        
        <div class="mermaid">
            <img src="diagrama_ssrf.png" alt="Diagrama SSRF - Server-Side Request Forgery" style="max-width: 100%; height: auto; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        
        <div class="vulnerability-box">
            <div class="vulnerability-title">2. üí• DoS (Denial of Service)</div>
            <p><strong>Causa:</strong> Aus√™ncia de rate limiting + carga de trabalho pesada<br>
            <strong>Simula√ß√£o:</strong> <code>time.sleep(0.5)</code> em cada requisi√ß√£o<br>
            <strong>Risco:</strong> Sobrecarga do servidor com requisi√ß√µes simult√¢neas<br>
            <strong>Impacto:</strong> Indisponibilidade total do servi√ßo</p>
        </div>
        
        <div class="mermaid">
            <img src="diagrama_dos.png" alt="Diagrama DoS - Denial of Service" style="max-width: 100%; height: auto; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        
        <div class="vulnerability-box">
            <div class="vulnerability-title">3. üîí Ransomware</div>
            <p><strong>Vetor:</strong> Explora√ß√£o das vulnerabilidades anteriores<br>
            <strong>Alvo:</strong> Arquivos cr√≠ticos (<code>app.py</code>, <code>model.pkl</code>)<br>
            <strong>Consequ√™ncia:</strong> Criptografia e inutiliza√ß√£o dos arquivos<br>
            <strong>Risco:</strong> Perda total de dados e aplica√ß√£o</p>
        </div>
        
        <div class="mermaid">
            <img src="diagrama_ransomware.png" alt="Diagrama Ransomware - Criptografia de Arquivos" style="max-width: 100%; height: auto; border: 1px solid #ddd; border-radius: 5px;">
        </div>
    </div>

    <!-- P√°gina 3: A Blindagem (As Implementa√ß√µes de 60 Pontos) -->
    <div class="page">
        <h1 class="section-title">A Blindagem - Prote√ß√µes Implementadas</h1>
        
        <p>Ap√≥s o sucesso dos ataques, implementamos as corre√ß√µes para fechar as brechas. Cada vulnerabilidade recebeu sua respectiva mitiga√ß√£o, transformando a aplica√ß√£o em um sistema robusto e seguro.</p>
        
        <h2>‚úÖ Rate Limiting (Anti-DoS)</h2>
        <div class="code-block">
limiter = Limiter(
    get_remote_address,
    app=app,
    default_limits=["10 per minute"],
    storage_uri="memory://"
)
        </div>
        <p><strong>Limite:</strong> <span class="highlight">10 requisi√ß√µes por minuto</span> por IP<br>
        <strong>Resposta:</strong> 429 Too Many Requests quando exceder limite</p>
        
        <h2>‚úÖ Valida√ß√£o de URL (Anti-SSRF)</h2>
        <div class="code-block">
# Whitelist de dom√≠nios permitidos
ALLOWED_DOMAINS = {'i.imgur.com', 'images.pexels.com'}

# Valida√ß√£o de esquema e dom√≠nio
if parsed_url.scheme not in ['http', 'https']:
    return jsonify({'error': 'URL inv√°lida ou n√£o permitida.'}), 403

if parsed_url.netloc not in ALLOWED_DOMAINS:
    return jsonify({'error': 'URL inv√°lida ou n√£o permitida.'}), 403
        </div>
        <p><strong>Lista branca de dom√≠nios:</strong> <span class="highlight">i.imgur.com, images.pexels.com</span><br>
        <strong>Resposta:</strong> 403 Forbidden para URLs n√£o permitidas</p>
        
        <h2>‚úÖ Simula√ß√£o de Carga</h2>
        <div class="code-block">
# Simula√ß√£o de processamento pesado
time.sleep(0.5)  # 500ms de delay por requisi√ß√£o
        </div>
        
        <h2>üß™ Valida√ß√£o dos Testes</h2>
        <p><strong>Teste SSRF:</strong> ‚úÖ URL bloqueada agora retorna <strong>403 Forbidden</strong><br>
        <strong>Teste DoS:</strong> ‚úÖ Ap√≥s 10 requisi√ß√µes: <strong>429 Too Many Requests</strong><br>
        <strong>Resultado:</strong> Vulnerabilidades <strong>completamente mitigadas</strong></p>
    </div>

    <!-- P√°gina 4: Arquitetura Final Segura -->
    <div class="page">
        <h1 class="section-title">Arquitetura Final Segura</h1>
        
        <div class="mermaid">
            <img src="diagrama_arquitetura.png" alt="Diagrama da Arquitetura Final Segura - Defesa em Profundidade" style="max-width: 100%; height: auto; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        
        <h2>Explica√ß√£o da Arquitetura de Seguran√ßa</h2>
        
        <div class="architecture-explanation">
            <h3>1. üõ°Ô∏è WAF (Web Application Firewall) - Primeira Camada</h3>
            <div class="architecture-item">
                <strong>Fun√ß√£o:</strong> Filtro inicial de tr√°fego malicioso<br>
                <strong>Prote√ß√£o:</strong> Bloqueia ataques conhecidos antes de chegar √† aplica√ß√£o<br>
                <strong>Benef√≠cios:</strong> Reduz carga na aplica√ß√£o e protege contra vulnerabilidades
            </div>
            
            <h3>2. ‚è±Ô∏è Rate Limiter (Anti-DoS) - Segunda Camada</h3>
            <div class="architecture-item">
                <strong>Implementa√ß√£o:</strong> Flask-Limiter<br>
                <strong>Limite:</strong> 10 requisi√ß√µes por minuto por IP<br>
                <strong>Prote√ß√£o:</strong> Previne sobrecarga do servidor<br>
                <strong>Resposta:</strong> 429 Too Many Requests quando exceder limite
            </div>
            
            <h3>3. ‚úÖ Validador de URL (Anti-SSRF) - Terceira Camada</h3>
            <div class="architecture-item">
                <strong>Implementa√ß√£o:</strong> Valida√ß√£o de dom√≠nios permitidos<br>
                <strong>Whitelist:</strong> i.imgur.com, images.pexels.com<br>
                <strong>Prote√ß√£o:</strong> Bloqueia acesso a recursos internos<br>
                <strong>Resposta:</strong> 403 Forbidden para URLs n√£o permitidas
            </div>
            
            <h3>4. ‚òÅÔ∏è Backup Service - Resili√™ncia</h3>
            <div class="architecture-item">
                <strong>Fun√ß√£o:</strong> Backup regular dos arquivos cr√≠ticos<br>
                <strong>Prote√ß√£o:</strong> Recupera√ß√£o contra ataques de ransomware<br>
                <strong>Frequ√™ncia:</strong> Backups autom√°ticos e regulares
            </div>
        </div>
        
        <h2>Defesa em Profundidade</h2>
        <p>A arquitetura implementada segue o princ√≠pio de <strong>defesa em profundidade</strong>:</p>
        <ul>
            <li><strong>M√∫ltiplas camadas de prote√ß√£o</strong> - Falha de uma camada n√£o compromete o sistema</li>
            <li><strong>Redund√¢ncia de seguran√ßa</strong> - Cada vulnerabilidade tem m√∫ltiplas mitiga√ß√µes</li>
            <li><strong>Monitoramento cont√≠nuo</strong> - Logs detalhados em cada camada</li>
        </ul>
    </div>

    <!-- P√°gina 5: Conclus√£o -->
    <div class="page">
        <h1 class="section-title">Conclus√£o</h1>
        
        <div class="conclusion">
            <p>O objetivo desta Sprint foi alcan√ßado: fornecer um aplicativo de Machine Learning com seguran√ßa e resili√™ncia demonstr√°veis. Iniciamos o projeto com uma aplica√ß√£o funcional, mas intencionalmente vulner√°vel. Ao aplicar a metodologia <strong>'atacar, ent√£o defender'</strong>, conseguimos provar que vulnerabilidades como SSRF e DoS eram ativamente explor√°veis, comprometendo tanto a confidencialidade quanto a disponibilidade do servi√ßo. A solu√ß√£o foi a implementa√ß√£o de uma <strong>Defesa em Profundidade</strong>, onde cada camada de seguran√ßa tem um prop√≥sito espec√≠fico. Este trabalho demonstra que a seguran√ßa deve ser uma considera√ß√£o prim√°ria (Security by Design) em qualquer arquitetura de ML, garantindo que a funcionalidade de predi√ß√£o seja entregue de forma robusta e confi√°vel ao usu√°rio final.</p>
        </div>
        
        <h2>üéØ Resultados Alcan√ßados</h2>
        <ul>
            <li><strong>‚úÖ Vulnerabilidades identificadas:</strong> SSRF, DoS e Ransomware</li>
            <li><strong>‚úÖ Mitiga√ß√µes implementadas:</strong> Rate limiting, valida√ß√£o de URL, backups</li>
            <li><strong>‚úÖ Arquitetura segura:</strong> Defesa em profundidade com m√∫ltiplas camadas</li>
            <li><strong>‚úÖ Testes de valida√ß√£o:</strong> Comprova√ß√£o da efic√°cia das prote√ß√µes</li>
            <li><strong>‚úÖ Metodologia aplicada:</strong> "Atacar, ent√£o defender"</li>
        </ul>
        
        <h2>üìä Impacto do Projeto</h2>
        <p>Este projeto demonstra a import√¢ncia da <strong>seguran√ßa por design</strong> em aplica√ß√µes de Machine Learning, mostrando que:</p>
        <ul>
            <li>Vulnerabilidades simples podem ter impactos devastadores</li>
            <li>A metodologia "atacar, ent√£o defender" √© eficaz para identificar riscos</li>
            <li>A defesa em profundidade √© essencial para sistemas cr√≠ticos</li>
            <li>A seguran√ßa deve ser considerada desde o in√≠cio do desenvolvimento</li>
        </ul>
        
        <div style="text-align: center; margin-top: 2em; color: #7f8c8d;">
            <p><strong>üéì Projeto Educacional - FIAP</strong><br>
            Sprint 4 - An√°lise de Vulnerabilidades de Seguran√ßa</p>
        </div>
    </div>
</body>
</html>
