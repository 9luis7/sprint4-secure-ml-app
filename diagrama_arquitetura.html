<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body { 
            margin: 0; 
            padding: 0; 
            font-family: Arial, sans-serif; 
            background: white; 
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }
        .mermaid { 
            text-align: center; 
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .mermaid svg {
            width: 1200px !important;
            height: 800px !important;
            max-width: none !important;
            max-height: none !important;
        }
    </style>
</head>
<body>
    <div class="mermaid">
graph TD
    User["👤 Usuário / Atacante"] --> WAF["🛡️ WAF / Firewall"];
    
    subgraph "Infraestrutura do Servidor Protegida"
        WAF --> AppServer["🖥️ Servidor da Aplicação"];
        subgraph "Camadas de Proteção"
            RateLimiter["⏱️ Rate Limiter (Anti-DoS)"];
            URLValidator["✅ Validador de URL (Anti-SSRF)"];
            MLModel["🧠 Modelo de ML"];
        end
        AppServer --> RateLimiter;
        RateLimiter --> URLValidator;
        URLValidator --> MLModel;
    end

    subgraph "Resiliência e Backup"
        BackupService["☁️ Serviço de Backup Externo"];
    end

    AppServer -.->|"Backups Regulares"| BackupService;

    style User fill:#2ecc71,stroke:#27ae60,stroke-width:2px,color:#fff
    style WAF fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
    style AppServer fill:#95a5a6,stroke:#7f8c8d,stroke-width:2px,color:#fff
    style RateLimiter fill:#e67e22,stroke:#d35400,stroke-width:2px,color:#fff
    style URLValidator fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#fff
    style MLModel fill:#9b59b6,stroke:#8e44ad,stroke-width:2px,color:#fff
    style BackupService fill:#34495e,stroke:#2c3e50,stroke-width:2px,color:#fff
    </div>
    
    <script>
        mermaid.initialize({ 
            startOnLoad: true, 
            theme: 'default',
            flowchart: {
                useMaxWidth: false,
                htmlLabels: true
            },
            themeVariables: {
                fontSize: '20px'
            }
        });
    </script>
</body>
</html>
